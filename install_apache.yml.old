---

- host: all
  become: true
  vars:
    # This logic picks the correct name beased on the OS family
    apache_name: "{{ 'apache2' if ansible_os_family == 'Debian' else 'httpd'}}"

  tasks:
  - name: Update apt cache (Ubuntu/Debian only)
    ansible.builtin.apt:
      update_cache: yes
    when: ansible_os_family == "Debian"

  - name: Install the Apache package
    ansible.builtin.package:
      name: "{{ apache_name }}"
      state: present

#    - Ensure Apache is started and enabled
#      ansible.builtin.service:
#        name: "httpd"
#        state: started
#        enabled: yes
